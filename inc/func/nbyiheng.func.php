<?php
 defined("\x49\x4e\x5f\111\x41") or die("\101\143\143\145\x73\163\40\104\145\x6e\x69\x65\144"); class Yiheng_express extends WeModuleSite { public function To_login_wx() { goto lo5p6; DRUmG: $siteroot = $_W["\163\x69\164\x65\x72\x6f\x6f\x74"]; goto CJYtc; wHR10: JZQ9h: goto i7hnj; nIW7I: $forward = "\150\x74\x74\160\163\x3a\x2f\57\x6f\x70\145\156\56\167\145\151\x78\151\156\x2e\x71\161\56\143\x6f\155\57\x63\x6f\156\x6e\145\143\x74\x2f\157\x61\165\164\x68\x32\x2f\141\x75\164\150\157\162\151\x7a\x65\77\x61\160\160\x69\144\75{$_W["\x6f\x61\x75\x74\150\137\141\x63\143\x6f\x75\156\x74"]["\153\145\171"]}\x26\x72\145\144\x69\162\145\x63\x74\137\x75\162\151\x3d{$callback}\x26\162\x65\x73\x70\x6f\156\163\145\137\x74\x79\160\145\75\143\x6f\144\145\x26\163\x63\x6f\160\x65\75\163\156\163\x61\x70\x69\x5f\x62\141\x73\145\46\x73\164\141\164\x65\x3d{$state}\x23\167\x65\143\x68\141\x74\x5f\x72\x65\144\151\x72\x65\x63\164"; goto QoHMy; tI2fn: BsspK: goto XOGb3; QoHMy: header("\114\x6f\x63\x61\x74\x69\157\156\x3a\40" . $forward); goto zoSg4; o59ol: if (!empty($_SESSION["\x64\145\x73\x74\x5f\x75\162\x6c"])) { goto lPDga; } goto pdTWL; QF0Vi: if (!empty($openid)) { goto BsspK; } goto s1jUa; zoSg4: exit; goto tI2fn; CJYtc: $set = "\x75\x6e\x69\x73\x65\x74\164\x69\156\147\x3a" . $_W["\x75\x6e\x69\141\143\x69\144"]; goto fkuia; fkuia: if (empty($_W["\143\141\x63\x68\x65"][$set]["\157\x61\x75\x74\150"]["\x68\157\163\x74"])) { goto JZQ9h; } goto Bgnt4; iJjOj: $callback = urlencode($url); goto nIW7I; i7hnj: $url = "{$siteroot}\141\160\x70\57\151\x6e\x64\145\170\x2e\160\x68\x70\77\151\75{$_W["\x75\x6e\x69\141\143\x69\x64"]}\46\152\x3d{$_W["\141\x63\x69\144"]}\x26\143\75\x61\x75\x74\150\46\141\75\157\x61\165\x74\150\x26\163\143\157\160\x65\75\163\156\163\141\160\x69\x5f\x62\x61\163\145"; goto iJjOj; lo5p6: global $_W; goto QF0Vi; s1jUa: $state = "\167\145\67\163\x69\144\x2d" . $_W["\163\145\x73\x73\151\x6f\156\137\x69\x64"]; goto o59ol; pdTWL: $_SESSION["\144\x65\x73\164\x5f\x75\x72\154"] = urlencode($_W["\163\x69\164\x65\165\x72\x6c"]); goto G91dz; G91dz: lPDga: goto DRUmG; Bgnt4: $siteroot = str_replace("\x68\x74\x74\x70\x3a\x2f\57" . $_SERVER["\110\124\x54\x50\137\x48\x4f\123\124"], rtrim($_W["\x63\141\x63\x68\145"][$set]["\157\x61\165\164\150"]["\x68\157\163\164"], "\57"), $siteroot); goto wHR10; XOGb3: } public function getLevel($openid) { goto ez4DO; lY0Ng: global $_S; goto MKRwd; jlW4d: if (empty($level)) { goto XaTab; } goto UQnaO; ez4DO: global $_W; goto lY0Ng; FKSAH: jVUL3: goto Ip6qq; AYPq7: $level = pdo_fetch("\163\x65\x6c\x65\x63\x74\40\x2a\40\x66\162\157\155\40" . tablename("\145\x77\145\x69\137\163\150\157\160\x5f\155\x65\x6d\x62\x65\x72\137\x6c\145\x76\x65\154") . "\40\x77\150\x65\162\145\x20\x69\x64\x3d\72\151\x64\x20\141\x6e\144\x20\x75\156\151\141\x63\x69\144\75\72\165\x6e\151\141\143\x69\144\40\154\151\155\x69\164\40\x31", array("\72\151\144" => $member["\154\145\166\x65\154"], "\72\x75\x6e\x69\141\x63\151\144" => $_W["\x75\156\151\x61\x63\x69\144"])); goto jlW4d; mVLjY: $member = m("\155\x65\x6d\x62\145\x72")->getMember($openid); goto mzjR9; iM996: XaTab: goto FKSAH; UQnaO: return $level; goto iM996; YydZG: uXJFn: goto mVLjY; hJWI_: return false; goto YydZG; mzjR9: if (!(!empty($member) && !empty($member["\154\145\x76\x65\x6c"]))) { goto jVUL3; } goto AYPq7; MKRwd: if (!empty($openid)) { goto uXJFn; } goto hJWI_; Ip6qq: return array("\154\145\166\x65\x6c\x6e\x61\x6d\145" => empty($_S["\x73\x68\157\160"]["\154\145\x76\145\154\x6e\141\x6d\x65"]) ? "\346\231\xae\351\x80\x9a\xe4\274\232\345\221\230" : $_S["\163\150\x6f\160"]["\x6c\145\166\x65\x6c\x6e\x61\x6d\x65"], "\x64\x69\163\x63\x6f\x75\x6e\x74" => empty($_S["\163\x68\x6f\160"]["\x6c\145\166\145\x6c\x64\151\163\143\x6f\165\x6e\164"]) ? 10 : $_S["\x73\150\x6f\x70"]["\x6c\145\x76\145\x6c\x64\x69\163\x63\157\165\156\x74"]); goto h3YoN; h3YoN: } public function insertLog($uniacid, $pid, $curnum, $changnum, $totalprice, $operator, $operatorid, $pinoutflag, $ip) { goto XlFox; XlFox: $pinout = "\156\x62\171\151\x68\x65\x6e\x67\137\x31\70\60\x31\x5f\x70\162\x6f\x64\165\143\x74\x73\137\151\156\x6f\165\164"; goto wxTAn; laJbv: $logdata = array("\x75\x6e\x69\141\x63\x69\144" => $uniacid, "\160\x5f\151\x64" => $pid, "\x70\137\x6e\x75\155" => $curnum, "\x70\x5f\143\x68\141\x6e\147\145\x5f\x6e\165\155" => $changnum, "\x70\137\x74\x6f\164\141\x6c\x5f\x70\x72\x69\143\145" => (double) $totalprice, "\x70\137\157\x70\145\162\x61\164\x6f\x72" => $memberitem["\x6d\137\156\141\x6d\x65"], "\160\x5f\x6f\160\145\x72\x61\x74\x6f\x72\x69\x64\40" => $operatorid, "\x70\x5f\157\x70\x74\x69\155\145" => time(), "\160\137\x69\156\137\157\x75\x74" => $pinoutflag, "\143\x6c\151\x65\156\x74\x69\x70" => $ip); goto ufyI0; ufyI0: $resultlog = pdo_insert($pinout, $logdata); goto LJdia; OMxCB: $memberitem = pdo_fetch("\163\145\154\145\143\x74\x20\52\40\x66\162\x6f\155\x20" . tablename($member) . "\40\167\150\x65\x72\x65\40\140\x75\156\151\x61\143\x69\x64\140\x3d\x3a\165\x6e\151\x61\x63\x69\x64\40\141\156\144\40\140\x6d\x5f\x75\151\x64\140\x3d\x3a\155\x5f\x75\x69\144\40", $params); goto laJbv; wxTAn: $member = "\156\142\171\151\150\x65\156\x67\x5f\61\70\x30\61\x5f\x6d\x65\155\x62\x65\162"; goto WHpS1; WHpS1: $params = array("\165\x6e\151\141\x63\151\144" => $uniacid, "\155\137\165\151\x64" => $operatorid); goto OMxCB; LJdia: return $resultlog; goto XP4cn; XP4cn: } public function insertMember($uniacid, $openid) { goto ypARX; uw5Io: $result = pdo_insert($member, $data); goto KOYTG; KOYTG: Qczdi: goto W2xDc; Y9eGC: $data = array("\x75\x6e\151\141\x63\151\x64" => $uniacid, "\x6d\x5f\146\x61\x6e\x69\144" => $fansinfo["\146\141\x6e\x73\x69\x64"], "\x6d\x5f\x75\x69\144" => $fansinfo["\x75\x69\x64"], "\x6d\x5f\141\x76\x61\x74\141\x72" => $fansinfob["\141\x76\x61\164\x61\162"], "\155\137\156\x61\x6d\145" => $fansinfo["\156\x69\x63\x6b\156\x61\x6d\x65"], "\x6d\137\x6f\160\145\x6e\x69\144" => $openid, "\155\137\146\141\x6e\151\144" => $fansinfo["\x66\141\156\151\144"], "\155\137\x66\x6f\154\154\157\167" => $fansinfo["\x66\157\154\x6c\x6f\x77"], "\155\x5f\154\x61\x73\164\164\x69\155\x65" => time()); goto uw5Io; xPjwO: FHGLc: goto XoMYR; ypARX: $member = "\x6e\142\x79\151\x68\145\156\x67\x5f\61\x38\60\61\x5f\x6d\x65\155\142\x65\162"; goto gUNnv; CzD2_: MXELG: goto SMrLp; XoMYR: $memberitem = pdo_fetch("\x73\145\x6c\x65\143\164\x20\52\x20\146\162\157\155\x20" . tablename($member) . "\40\167\x68\145\x72\145\40\140\x75\x6e\151\x61\143\151\x64\x60\x3d\x3a\165\x6e\151\x61\x63\151\144\x20\x61\x6e\144\40\140\155\x5f\x6f\160\145\156\x69\x64\140\x3d\72\155\x5f\x6f\160\x65\x6e\x69\144\x20", $params); goto JEkSP; qOrhM: goto Qczdi; goto CzD2_; JEkSP: if (empty($memberitem)) { goto MXELG; } goto laEjR; gUNnv: $params = array("\x75\x6e\151\141\x63\151\144" => $uniacid, "\155\x5f\x6f\x70\x65\x6e\x69\x64" => $openid); goto NcrlL; g7scy: $fansinfob = pdo_fetch("\123\105\114\x45\103\x54\x20\52\x20\x46\x52\117\x4d\40\x60\x69\x6d\163\x5f\155\x63\x5f\x6d\145\155\x62\x65\162\163\140\40\127\110\105\x52\105\x20\140\x69\x6d\x73\137\x6d\143\x5f\155\145\155\x62\x65\x72\x73\x60\56\x60\165\151\144\x60\x3d" . $fansinfo["\165\151\x64"]); goto Y9eGC; BRYXV: exit; goto xPjwO; laEjR: $data = array("\155\x5f\154\x61\x73\164\x74\151\x6d\x65" => time(), "\x6d\137\166\164\x69\x6d\145\163" => $memberitem["\155\x5f\x76\164\x69\x6d\145\163"] + 1); goto bCPQB; NcrlL: if ($uniacid) { goto FHGLc; } goto BRYXV; bCPQB: $result = pdo_update($member, $data, array("\151\x64" => $memberitem["\151\x64"])); goto qOrhM; SMrLp: $fansinfo = pdo_fetch("\123\105\x4c\x45\103\x54\40\52\40\106\x52\x4f\115\x20\140\151\155\x73\137\x6d\143\137\x6d\x61\x70\160\151\156\147\137\146\x61\156\x73\x60\40\x57\x48\105\x52\105\40\140\x69\x6d\163\137\155\x63\x5f\x6d\141\x70\160\x69\x6e\147\x5f\146\141\x6e\163\140\56\x60\157\160\145\x6e\x69\x64\x60\x20\x6c\151\x6b\145\x20\x27{$openid}\47"); goto g7scy; W2xDc: } public function isauth($openid) { goto NLuae; W6IYt: NXcWJ: goto SOoKd; NLuae: if (!empty($openid)) { goto NXcWJ; } goto jjA2i; la4KW: $siteroot = $_W["\x73\151\x74\x65\162\x6f\x6f\164"]; goto YkINp; L5GYc: $siteroot = str_replace("\x68\x74\x74\x70\x3a\57\57" . $_SERVER["\x48\x54\124\x50\137\x48\117\x53\124"], rtrim($_W["\x63\141\x63\x68\x65"][$set]["\157\x61\x75\164\150"]["\150\157\x73\164"], "\x2f"), $siteroot); goto Eoz1T; QoTUX: if (!empty($_SESSION["\144\x65\163\x74\137\x75\x72\x6c"])) { goto xg8Nr; } goto ZIATq; C_3rC: header("\x4c\157\x63\141\164\x69\157\156\72\40" . $forward); goto oQGoX; Eoz1T: UPJAl: goto jE8d_; jE8d_: $url = "{$siteroot}\x61\160\160\57\x69\x6e\144\x65\x78\56\x70\150\160\x3f\151\75{$_W["\165\x6e\x69\141\x63\x69\144"]}\x26\152\x3d{$_W["\x61\x63\151\144"]}\x26\x63\75\x61\x75\x74\150\x26\x61\x3d\x6f\141\x75\x74\150\46\163\x63\x6f\160\x65\x3d\163\156\163\x61\160\151\x5f\142\x61\163\x65"; goto SsHen; ZIATq: $_SESSION["\x64\145\x73\164\x5f\165\162\x6c"] = urlencode($_W["\163\151\164\145\x75\162\154"]); goto JZ2Ds; oQGoX: exit; goto W6IYt; YkINp: $set = "\165\x6e\x69\x73\x65\164\x74\151\x6e\x67\72" . $_W["\165\156\151\x61\x63\x69\x64"]; goto KLXgL; jjA2i: $state = "\x77\x65\x37\x73\151\x64\55" . $_W["\163\145\163\163\151\x6f\156\x5f\151\x64"]; goto QoTUX; SOoKd: checkauth(); goto M4mHN; Uczhm: $forward = "\x68\x74\164\x70\x73\x3a\x2f\57\x6f\x70\145\x6e\x2e\167\145\151\x78\x69\156\x2e\x71\x71\56\x63\x6f\155\x2f\x63\157\x6e\156\145\x63\x74\x2f\157\x61\x75\x74\x68\62\57\x61\165\x74\x68\x6f\162\x69\x7a\145\x3f\141\160\x70\x69\144\75{$_W["\157\x61\165\x74\x68\x5f\141\143\x63\157\165\156\x74"]["\153\145\171"]}\x26\x72\145\144\151\162\x65\143\164\137\165\162\151\75{$callback}\x26\162\145\x73\x70\157\x6e\163\145\x5f\x74\171\x70\x65\x3d\x63\x6f\144\x65\x26\163\x63\x6f\160\x65\75\x73\156\x73\x61\x70\151\137\x62\x61\x73\x65\46\163\164\141\x74\145\75{$state}\x23\167\145\143\x68\141\164\137\x72\145\144\151\162\145\x63\x74"; goto C_3rC; SsHen: $callback = urlencode($url); goto Uczhm; KLXgL: if (empty($_W["\x63\141\x63\150\x65"][$set]["\x6f\141\x75\164\x68"]["\150\x6f\163\164"])) { goto UPJAl; } goto L5GYc; JZ2Ds: xg8Nr: goto la4KW; M4mHN: } public function is_allow($openid, $uniacid) { goto BmOJJ; BmOJJ: $member = "\x6e\x62\171\151\x68\x65\156\x67\x5f\x31\x38\60\x31\137\155\145\155\142\x65\x72"; goto EpFIu; EpFIu: $params = array("\x75\x6e\151\141\143\151\144" => $uniacid, "\x6d\x5f\x6f\160\145\156\x69\x64" => $openid); goto npcD4; kepDQ: $allowflag = empty($allow) ? 0 : $allow["\155\137\x61\154\x6c\x6f\x77"]; goto MZfbl; npcD4: $allow = pdo_fetch("\123\105\114\x45\103\124\40\x2a\40\106\x52\x4f\x4d\40" . tablename($member) . "\x20\127\110\x45\122\x45\x20\x75\156\x69\x61\x63\151\x64\x20\x3d\72\165\x6e\x69\x61\143\151\144\40\141\x6e\144\x20\x6d\137\x6f\x70\x65\x6e\x69\144\x20\x6c\x69\x6b\x65\x20\x3a\155\x5f\157\160\145\x6e\151\144\40\141\156\144\40\x60\155\x5f\x61\154\154\x6f\x77\x60\151\x6e\x20\x28\60\54\x31\51", $params); goto kepDQ; MZfbl: return $allowflag; goto BeFap; BeFap: } public function is_manage($openid, $uniacid) { goto mhQTS; mRzQq: $manage = pdo_fetch("\x53\x45\114\105\x43\124\40\x2a\40\106\122\117\115\x20" . tablename($member) . "\40\x57\110\105\122\105\x20\165\156\151\141\143\151\144\40\x3d\x3a\165\156\151\141\143\x69\x64\40\x61\156\144\x20\155\x5f\157\x70\x65\156\x69\144\40\154\151\153\145\x20\x3a\x6d\137\x6f\160\145\x6e\x69\x64\x20", $params); goto aET1A; BzApr: dfwpi: goto xRw60; aET1A: if (!($manage["\155\137\154\x65\x76\x65\154"] == 99)) { goto dfwpi; } goto DuNNW; mhQTS: $member = "\156\142\x79\151\x68\x65\x6e\x67\x5f\x31\x38\60\61\137\155\145\x6d\142\145\162"; goto SAKS6; xRw14: return $manageflag; goto BzApr; DuNNW: $manageflag = 99; goto xRw14; SAKS6: $params = array("\x75\156\x69\141\x63\151\144" => $uniacid, "\155\x5f\x6f\160\x65\x6e\x69\144" => $openid); goto mRzQq; xRw60: $manageflag = $manage["\155\137\x6c\x65\166\x65\x6c"] == 1 ? 1 : 0; goto jnEIy; jnEIy: return $manageflag; goto Ov8O2; Ov8O2: } public function sendmessage($uniacid, $openid, $tpl_no, $url = null) { goto c2u2v; qzNXu: $params = array("\x75\x6e\x69\141\x63\151\x64" => $uniacid, "\164\160\x6c\x5f\164\x79\x70\145" => $tpl_no, "\164\x70\154\137\163\x74\141\164\165\163" => 1); goto k2VLz; c2u2v: $notice = "\x6e\x62\171\151\150\145\x6e\x67\x5f\61\70\x30\x31\137\x6e\x6f\x74\x69\x63\145"; goto qzNXu; k2VLz: $tplinfo = pdo_fetch("\123\105\x4c\105\103\124\x20\x2a\x20\x46\122\117\115\40" . tablename($notice) . "\40\127\x48\x45\x52\105\40\165\x6e\151\141\x63\151\x64\x20\75\72\165\156\x69\x61\x63\x69\x64\40\141\156\x64\x20\x74\x70\154\137\164\171\160\x65\x20\x3d\x20\x3a\164\160\x6c\137\x74\171\160\145\40\40\x61\x6e\144\x20\x74\x70\x6c\137\163\x74\141\164\x75\163\x20\75\40\72\x74\160\x6c\x5f\163\164\141\x74\165\163", $params); goto rAgQE; RMdzQ: xCv0L: goto U1upG; U1upG: $data = array("\x66\151\x72\x73\x74" => array("\x76\141\154\x75\145" => $tplinfo["\164\x70\154\137\x74\x69\x74\x6c\x65"], "\143\x6f\154\x6f\x72" => "\x23\146\146\65\x31\x30"), "\x6b\145\x79\167\x6f\x72\144\x31" => array("\x76\141\154\x75\145" => $tplinfo["\x74\160\154\x5f\x74\x65\x78\164\x32"], "\x63\157\x6c\x6f\x72" => "\43\x66\146\65\61\x30"), "\x6b\x65\171\167\x6f\162\144\x32" => array("\x76\141\154\x75\145" => $tplinfo["\164\x70\154\137\164\145\x78\164\x33"], "\x63\157\154\x6f\x72" => "\43\x66\146\65\x31\x30"), "\x6b\145\x79\x77\x6f\x72\144\63" => array("\x76\x61\154\165\145" => $tplinfo["\x74\160\x6c\x5f\164\x65\170\x74\x34"], "\143\x6f\154\157\x72" => "\x23\x66\146\x35\x31\60"), "\153\145\x79\x77\157\x72\x64\x34" => array("\x76\141\154\x75\145" => $tplinfo["\x74\160\154\x5f\164\145\170\x74\x35"], "\143\x6f\154\157\162" => "\x23\146\146\x35\61\x30"), "\x6b\x65\171\x77\157\x72\x64\x35" => array("\x76\x61\x6c\165\x65" => $tplinfo["\x74\160\x6c\x5f\164\145\x78\164\x36"], "\x63\x6f\154\x6f\x72" => "\43\146\146\x35\x31\60"), "\x72\x65\155\x61\x72\153" => array("\166\x61\154\x75\x65" => $tplinfo["\x74\x70\x6c\137\x72\145\155\x61\162\153"], "\x63\x6f\x6c\x6f\162" => "\x23\146\146\65\61\60")); goto zAK5a; U5wgU: die; goto RMdzQ; zAK5a: $account_api = WeAccount::create(); goto bVsqt; bVsqt: $status = $account_api->sendTplNotice($openid, $tplinfo["\164\x70\154\151\x64"], $data, $url); goto GsblV; rAgQE: if (!empty($tplinfo)) { goto xCv0L; } goto U5wgU; GsblV: } public function sendmessage_input($openid, $tplid, $datainfo) { goto tZ1m3; tZ1m3: global $_W, $_GPC; goto v07Kz; E73KS: $account_api = WeAccount::create(); goto avsb2; QNaqL: $url = str_replace("\x2e\x2f", '', $url); goto GTb23; HNGaC: $tplid = "\170\102\67\x51\x63\113\x69\x37\x6a\111\x49\x34\154\x77\62\124\x50\107\x6e\x42\x6f\164\x6b\x69\x7a\x70\142\65\121\x4e\x68\102\166\x59\157\x73\x4b\121\145\x43\120\152\153"; goto E73KS; avsb2: $url = $_W["\163\151\164\x65\162\x6f\157\164"] . "\141\160\160\x2f" . $this->createMobileUrl("\162\145\143\x6f\162\x64") . "\171\151\150\x65\x6e\x67\x5f\x65\170\x70\x72\x65\163\x73"; goto QNaqL; v07Kz: $data = array("\x66\x69\162\163\164" => array("\166\x61\154\x75\145" => $datainfo["\146\x69\162\163\x74"], "\143\157\x6c\x6f\x72" => "\x23\x37\64\63\x41\x33\x41"), "\x6b\x65\171\x77\x6f\162\x64\x31" => array("\166\141\x6c\165\x65" => $datainfo["\x6b\145\x79\x77\157\x72\x64\61"], "\143\157\154\157\162" => "\x23\x66\146\65\x31\x30"), "\153\145\171\x77\x6f\162\144\62" => array("\166\x61\x6c\x75\x65" => $datainfo["\x6b\x65\x79\x77\157\162\144\x32"], "\x63\157\154\157\x72" => "\43\146\x66\x35\x31\x30"), "\x72\145\x6d\x61\x72\x6b" => array("\x76\141\x6c\x75\145" => $datainfo["\x72\x65\x6d\141\x72\x6b"], "\143\157\x6c\157\162" => "\x23\62\x37\62\70\x32\x32")); goto HNGaC; GTb23: $status = $account_api->sendTplNotice($openid, $tplid, $data, $url); goto zPFoS; zPFoS: } public function sendmessage_inputa($openid, $tplid, $datainfo, $url) { goto WDJXS; cr55k: $status = $account_api->sendTplNotice($openid, $tplid, $data, $url); goto RcJou; Mj25d: $url = str_replace("\56\x2f", '', $url); goto cr55k; o1Idq: $data = array("\146\x69\x72\163\x74" => array("\166\x61\154\x75\145" => $datainfo["\x66\151\x72\163\164"], "\143\157\x6c\157\162" => "\x23\67\64\x33\x41\x33\101"), "\153\x65\x79\167\x6f\x72\144\x31" => array("\166\141\154\165\x65" => $datainfo["\153\145\x79\167\157\162\x64\61"], "\x63\x6f\154\157\x72" => "\43\x66\146\65\x31\x30"), "\x6b\145\171\x77\157\x72\x64\x32" => array("\166\141\154\165\x65" => $datainfo["\x6b\x65\171\167\157\x72\x64\x32"], "\x63\157\x6c\157\x72" => "\43\146\x66\x35\61\x30"), "\x72\x65\155\x61\162\x6b" => array("\x76\141\x6c\x75\x65" => $datainfo["\162\x65\x6d\x61\x72\x6b"], "\x63\157\154\x6f\162" => "\x23\62\67\x32\70\62\62")); goto rzoz7; WDJXS: global $_W, $_GPC; goto o1Idq; rzoz7: $account_api = WeAccount::create(); goto TgVbC; TgVbC: $url = $_W["\x73\151\164\x65\x72\157\x6f\x74"] . "\141\x70\x70\x2f" . $this->createMobileUrl($url) . "\x79\151\150\x65\x6e\x67\x5f\145\x78\160\162\145\163\163"; goto Mj25d; RcJou: } public function send_sms($tel, $openid, $typeid, $code, $uniacid, $clientip) { goto OTdtL; f4luH: $params = array("\x73\x6d\163\x5f\x74\171\160\145" => $typeid); goto pJcgv; bQzC3: if (!(!empty($sms_surplus) || $typeid == 1 || $typeid == 2)) { goto dsi2R; } goto y03mq; y03mq: $where = "\40\x77\150\x65\162\x65\40\x20\163\x6d\x73\137\164\171\x70\145\x20\x3d\72\x73\155\x73\x5f\x74\171\x70\x65\x20"; goto H2s3o; RnaCi: curl_setopt_array($curl, array(CURLOPT_URL => "\150\x74\164\160\72\x2f\x2f\x61\160\x69\163\56\x68\141\x6f\x73\145\x72\166\151\x63\x65\56\x63\x6f\155\57\x73\x6d\163\x2f\163\145\156\144\166\62\x3f\x6d\157\142\151\x6c\145\75{$tel}\46\164\x70\x6c\137\151\144\x3d{$sms_do_id}\x26\143\157\x6e\x74\x65\156\164\x3d{$content}\x26\x6b\145\171\75{$sms_key}", CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => '', CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 30, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "\x47\x45\124")); goto P0_4H; drIUB: oQjJo: goto t4CCh; WqVy4: $curl = curl_init(); goto RnaCi; Ma1Xb: $sms_key = $sms_info["\x73\155\163\x5f\x6b\145\x79"]; goto PShwB; PShwB: $sms_do_id = $sms_info["\x73\155\x73\x5f\x6d\145\163\x73\x61\x67\x65\x5f\151\x64"]; goto nt4C6; pJcgv: $sms_info = pdo_fetch("\123\x45\x4c\x45\103\124\40\x2a\40\x46\x52\117\x4d\x20" . tablename($express_sms_setting) . $where . $orderby, $params); goto kIUJ9; XTKsW: $sms_surplus = pdo_fetch("\x53\x45\114\x45\103\124\x20\52\x20\106\122\117\x4d\40" . tablename($express_sms_user) . $where . $orderby, $params); goto bQzC3; m6SDo: $where = "\x20\x77\150\145\x72\x65\40\165\x73\145\x72\137\x6f\x70\145\156\x69\144\x20\x6c\151\x6b\145\40\x3a\x75\163\x65\x72\x5f\157\x70\x65\156\151\144\x20\141\156\144\x20\x75\x6e\151\141\x63\151\144\40\x3d\72\165\156\151\x61\x63\x69\144\40\141\x6e\144\40\x75\163\145\x72\x5f\x73\155\163\137\x73\165\x72\160\154\x75\x73\40\76\x20\x3a\165\163\145\162\x5f\x73\155\163\x5f\x73\165\x72\160\x6c\x75\163"; goto HDNY5; RH5OF: curl_close($curl); goto sTjJb; c3Ae7: $express_sms_log = "\171\x69\150\145\x6e\147\x5f\145\170\x70\162\145\x73\x73\137\x73\155\163\137\x6c\157\x67"; goto Ma1Xb; tvO7f: $express_sms_setting = "\x79\151\150\x65\x6e\147\137\145\x78\160\162\145\163\x73\137\x73\155\x73\x5f\x73\x65\164\x74\x69\x6e\147"; goto m6SDo; CY7XX: $resultlog = pdo_insert($express_sms_log, $logdata); goto drIUB; jqHsz: $err = curl_error($curl); goto RH5OF; t4CCh: dsi2R: goto vUPb_; OTdtL: $express_sms_user = "\x79\151\x68\x65\156\x67\x5f\x65\x78\160\x72\x65\163\163\x5f\x73\x6d\163\x5f\165\163\145\162"; goto tvO7f; H2s3o: $limit = "\40\154\151\155\151\164\40\61"; goto f4luH; kIUJ9: if (empty($sms_info)) { goto oQjJo; } goto c3Ae7; HDNY5: $limit = "\x20\154\x69\x6d\151\x74\x20\61"; goto Ku3Vk; Ku3Vk: $params = array("\165\156\x69\x61\143\x69\144" => $uniacid, "\165\x73\145\x72\137\157\160\145\x6e\x69\144" => $openid, "\165\163\145\162\x5f\163\155\x73\137\x73\x75\162\160\154\165\163" => 0); goto XTKsW; sTjJb: $logdata = array("\165\x6e\x69\x61\143\x69\x64" => $uniacid, "\x73\145\156\x64\137\x6f\160\x65\156\x69\144" => $openid, "\x73\x65\x6e\144\137\164\x69\x6d\x65" => time(), "\x73\x65\x6e\144\137\164\157" => $tel, "\163\x65\x6e\144\137\x63\x6f\156\164\156\x65\164" => $content, "\163\x65\x6e\x64\137\151\x70" => $clientip); goto CY7XX; P0_4H: $response = curl_exec($curl); goto jqHsz; nt4C6: $content = str_replace("\43\x63\157\144\145\x23", $code, $sms_info["\x73\155\163\137\x6d\145\x73\x73\141\147\145"]); goto WqVy4; vUPb_: } }